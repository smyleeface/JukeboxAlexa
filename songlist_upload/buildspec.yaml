version: 0.2
phases:
  install:
    commands:
      - cd songlist_upload
      - pip install -r requirements.txt
  pre_build:
    commands:
        - python setup.py test

## publishes to: https://s3-us-west-2.amazonaws.com/smyleeface-public/JukeboxAlexa/CodeBuildArtifacts/jukeboxAlexa.zip
#artifacts:
#  files:
#    - '**/*'
#  base-directory: JukeboxAlexa/bin/Debug/netcoreapp2.0/publish
#  discard-paths: yes

# docker build -t jukebox-python -f Dockerfile-python .
# docker tag jukebox-python:latest 892750500233.dkr.ecr.us-west-2.amazonaws.com/jukebox-python:latest
# docker push 892750500233.dkr.ecr.us-west-2.amazonaws.com/jukebox-python:latest
# docker run -it --rm --name songlist_upload -v $HOME/.aws:/root/.aws -v $PWD:/project jukebox-python