# NOTE (pattyr, 20180201): After second deploy, uncomment `Comment Block #2` below and re-deploy to add event trigger to s3 bucket

---
AWSTemplateFormatVersion: 2010-09-09
Description: Alexa Jukebox Application - S3 Buckets

Parameters:
  S3BucketJukeboxSongsCsv:
    Type: String
    Description: S3 Bucket the Jukebox Songs CSV are uploaded

Resources:

  S3JukeboxSongsCsv:
    Type: "AWS::S3::Bucket"
    Properties:
      BucketName: !Ref S3BucketJukeboxSongsCsv

      # START Comment Block #2 REGION
#      NotificationConfiguration:
#        LambdaConfigurations:
#          - Event: "s3:ObjectCreated:*"
#            Function: !ImportValue jukebox-lambda-songlistuploadlambdaarn
#            Filter:
#              S3Key:
#                Rules:
#                  - Name: suffix
#                    Value: csv
      # END Comment Block #2 REGION

Outputs:
  S3JukeboxSongsCsv:
    Description: The ARN of the Jukebox Song CSV Bucket
    Value: !GetAtt S3JukeboxSongsCsv.Arn
    Export:
      Name: jukebox-s3-JukeboxSongsCsvArn
